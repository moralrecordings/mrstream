
NGINX_VERSION=1.18.0
NJS_VERSION=0.6.2
NGX_DEVEL_KIT_COMMIT=a22dade76c838e5f377d58d007f65d35b5ce1df3
SET_MISC_NGINX_MODULE_COMMIT=62acbc089f6422dfa9339ab90e274487390ac8b6
NGINX_RTMP_MODULE_COMMIT=23e1873aa62acb58b7881eed2a501f5bf35b82e9

IMAGE_NAME=mrstream-nginx
VERSION=0.1

build:
	DOCKER_BUILDKIT=1 docker build --progress=plain --build-arg NGINX_VERSION=$(NGINX_VERSION) --build-arg NJS_VERSION=$(NJS_VERSION) --build-arg NGX_DEVEL_KIT_COMMIT=$(NGX_DEVEL_KIT_COMMIT) --build-arg SET_MISC_NGINX_MODULE_COMMIT=$(SET_MISC_NGINX_MODULE_COMMIT) --build-arg NGINX_RTMP_MODULE_COMMIT=$(NGINX_RTMP_MODULE_COMMIT) -t $(IMAGE_NAME):$(VERSION) -t $(IMAGE_NAME):latest .

